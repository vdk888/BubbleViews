# ============================================================================
# Reddit AI Agent - Environment Configuration Template
# ============================================================================
# IMPORTANT: This is a template file with placeholder values only.
# DO NOT commit real secrets to version control!
#
# Setup Instructions:
# 1. Copy this file: cp .env.example .env
# 2. Replace all placeholder values with real credentials
# 3. Ensure .env is in .gitignore (it should be by default)
# 4. Set file permissions: chmod 600 .env
#
# For detailed setup instructions, see: docs/runbooks/secrets.md
# ============================================================================

# ----------------------------------------------------------------------------
# Database Configuration
# ----------------------------------------------------------------------------
# SQLite (MVP) - stores personas, beliefs, interactions, settings
# For production, replace with PostgreSQL:
#   DATABASE_URL=postgresql+asyncpg://user:password@host:5432/dbname
DATABASE_URL=sqlite+aiosqlite:///./data/reddit_agent.db

# ----------------------------------------------------------------------------
# Reddit API Credentials
# ----------------------------------------------------------------------------
# Get these from: https://www.reddit.com/prefs/apps
# 1. Click "Create App" or "Create Another App"
# 2. Select "script" type
# 3. Set redirect URI to: http://localhost:8080
# 4. Note the client_id (under app name) and client_secret

# Reddit OAuth2 Client ID (alphanumeric string, ~14 chars)
REDDIT_CLIENT_ID=YOUR_CLIENT_ID_HERE

# Reddit OAuth2 Client Secret (alphanumeric string, ~27 chars)
REDDIT_CLIENT_SECRET=YOUR_CLIENT_SECRET_HERE

# Reddit User Agent (required by Reddit API terms)
# Format: platform:app_name:version (by /u/your_reddit_username)
# Example: python:BubbleViewsBot:v1.0 (by /u/MyRedditAccount)
REDDIT_USER_AGENT=python:YourAppName:v1.0 (by /u/YOUR_REDDIT_USERNAME)

# Your Reddit account username (no /u/ prefix)
REDDIT_USERNAME=YOUR_REDDIT_USERNAME

# Your Reddit account password
# WARNING: Keep this secure! Consider using a dedicated bot account.
REDDIT_PASSWORD=YOUR_REDDIT_PASSWORD

# ----------------------------------------------------------------------------
# OpenRouter LLM API Configuration
# ----------------------------------------------------------------------------
# Get API key from: https://openrouter.ai/keys
# Set spending limits in OpenRouter dashboard to prevent unexpected charges

# OpenRouter API Key (starts with sk-or-v1-)
OPENROUTER_API_KEY=sk-or-v1-YOUR_API_KEY_HERE

# OpenRouter API Base URL (OpenAI-compatible endpoint)
OPENROUTER_BASE_URL=https://openrouter.ai/api/v1

# ----------------------------------------------------------------------------
# LLM Model Selection
# ----------------------------------------------------------------------------
# Switch models without code changes
# Available models: https://openrouter.ai/docs#models
# Recommended for MVP:
#   - gpt-5.1: Fast, cheap, good for drafts
#   - claude-4.5-haiku: Fast, accurate, good for consistency checks

# Primary model for generating Reddit responses
RESPONSE_MODEL=openai/gpt-5.1

# Secondary model for consistency checks and belief validation
CONSISTENCY_MODEL=anthropic/claude-haiku-4.5

# Model for intelligent relationship suggestions between beliefs
RELATIONSHIP_MODEL=anthropic/claude-haiku-4.5

# ----------------------------------------------------------------------------
# Belief Auto-Linking Configuration
# ----------------------------------------------------------------------------
# When a new belief is created (e.g., via moderation approval), the system
# can automatically suggest and create relationships with existing beliefs.

# Enable/disable automatic belief relationship creation (true/false)
# When enabled, new beliefs will be linked to existing beliefs above the weight threshold
AUTO_LINK_BELIEFS=true

# Minimum weight threshold for auto-creating edges (0.0-1.0)
# Only relationships with weight >= this value will be auto-created
# 0.5 = moderate confidence (recommended default)
# 0.7 = high confidence only
AUTO_LINK_MIN_WEIGHT=0.5

# ----------------------------------------------------------------------------
# Agent Behavior Configuration
# ----------------------------------------------------------------------------
# Subreddits the agent monitors (JSON array or comma-separated)
# Start with test subreddits: r/test, r/bottest
# Example: ["test","bottest","AskReddit"]
TARGET_SUBREDDITS=["test","bottest"]

# Agent loop interval (in seconds)
# How often the agent checks for new posts and generates responses
# Default: 14400 (4 hours)
# Common values:
#   60 = every minute (testing)
#   3600 = every hour
#   14400 = every 4 hours (default)
#   86400 = once per day
AGENT_INTERVAL_SECONDS=14400

# Auto-posting mode (true/false)
# false: Drafts go to moderation queue for human review (RECOMMENDED for MVP)
# true: Agent posts automatically (only enable after thorough testing)
AUTO_POSTING_ENABLED=false

# ----------------------------------------------------------------------------
# Security Configuration
# ----------------------------------------------------------------------------
# CRITICAL: Generate a strong secret key for JWT token signing
# This key signs authentication tokens - keep it secret and secure!
#
# Generate with: openssl rand -hex 32
# Must be at least 32 characters long
#
# WARNING: Changing this key invalidates all existing user sessions.
# See docs/runbooks/secrets.md for rotation procedures.
SECRET_KEY=CHANGE_ME_32_CHARS_MIN_GENERATE_WITH_OPENSSL_RAND_HEX_32

# JWT token expiration time (in minutes)
# Default: 60 minutes (1 hour)
# Increase for longer sessions, decrease for higher security
ACCESS_TOKEN_EXPIRE_MINUTES=60

# ----------------------------------------------------------------------------
# CORS Configuration
# ----------------------------------------------------------------------------
# Allowed origins for cross-origin requests (frontend URLs)
# Development: http://localhost:3000
# Production: Add your production domain(s)
# Multiple origins: ["http://localhost:3000","https://app.example.com"]
CORS_ORIGINS=["http://localhost:3000"]

# Allow credentials (cookies) in CORS requests
CORS_ALLOW_CREDENTIALS=true

# ----------------------------------------------------------------------------
# API Configuration
# ----------------------------------------------------------------------------
# API version prefix (all endpoints prefixed with this)
API_V1_PREFIX=/api/v1

# Project name (displayed in API docs at /docs)
PROJECT_NAME=Reddit AI Agent

# ============================================================================
# Environment-Specific Configuration Examples
# ============================================================================

# Development Example:
# - Use test subreddits
# - Auto-posting disabled
# - Localhost frontend
# - SQLite database

# Staging Example:
# - Use test subreddits
# - Auto-posting disabled
# - Staging domain for CORS
# - PostgreSQL database

# Production Example:
# - Use real subreddits
# - Auto-posting enabled (after testing)
# - Production domain for CORS
# - PostgreSQL database with backups

# ============================================================================
# Security Checklist Before Deployment
# ============================================================================
# [ ] SECRET_KEY is 32+ characters and cryptographically random
# [ ] All placeholder values replaced with real credentials
# [ ] .env file is in .gitignore
# [ ] .env file permissions set to 600 (chmod 600 .env)
# [ ] No secrets committed to Git (check with: git log -p --all -S 'SECRET_KEY')
# [ ] Different secrets for dev/staging/production environments
# [ ] OpenRouter spending limits configured
# [ ] Reddit bot account uses strong password
# [ ] Backup of production secrets stored in secure password manager
# [ ] Team members know secret rotation procedures (docs/runbooks/secrets.md)
# ============================================================================
